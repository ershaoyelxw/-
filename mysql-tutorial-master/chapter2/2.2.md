
Linux平台下安装与配置 MySQL
---

这里简单的介绍几种Linux平台安装MySQL，基本上大同小异，通过一些平台的软件管理工具来快速安装MySQL。

## Centos 6.5安装 MySQL


### yum工具安装

直接使用 yum 命令去安装 mysql，按之前可以先看一下源的版本，如果源的版本过低，可以在[这里下载](http://dev.mysql.com/downloads/repo/yum/)开发版新的源，发布吧源[在这里](http://repo.mysql.com/yum/)更新，在安装的过程可以编辑`vim /etc/yum.repos.d/mysql-community.repo`选择发布系列版本，编辑如下，其中参数`enabled`的值为 0 的表示禁用，更改为 1 的时候你就可以磨人安装 5.7，否则安装的将是 5.6 版。

```bash
# Enable to use MySQL 5.6
[mysql56-community]
name=MySQL 5.6 Community Server
baseurl=http://repo.mysql.com/yum/mysql-5.6-community/el/6/$basearch/
enabled=1
gpgcheck=1
gpgkey=file:/etc/pki/rpm-gpg/RPM-GPG-KEY-mysql

# Note: MySQL 5.7 is currently in development. For use at your own risk.
# Please read with sub pages: https://dev.mysql.com/doc/relnotes/mysql/5.7/en/
[mysql57-community-dmr]
name=MySQL 5.7 Community Server Development Milestone Release
baseurl=http://repo.mysql.com/yum/mysql-5.7-community/el/6/$basearch/
enabled=0
gpgcheck=1
gpgkey=file:/etc/pki/rpm-gpg/RPM-GPG-KEY-mysql
```

经过上面的编辑之后你可以开始安装了

```bash
# 有两种方式查看当前 mysql 版本，看是否已安装
mysql --version
rpm -qa | grep mysql

# 安装如果上面编辑前没有看到你想要的版本
# 可以更新源
wget http://dev.mysql.com/get/mysql57-community-release-el6-8.noarch.rpm
yum localinstall mysql57-community-release-el6-8.noarch.rpm
yum install mysql-server

# 安装mysql
yum install mysql-server
```


### 启动服务

安装完成后，使用 service 命令启动 mysql 服务，在Mac上`service`命令不存在

```bash
# Linux 这么运行
service mysqld start
# Mac 运行去掉 service 
mysqld start

# 还可以这么查看，MySQL服务器是否启动
ps -ef | grep mysqld

# 查看服务运行的状态
service mysqld status
```

### 修改配置

启动后我们需要简单配置一下 mysql ，默认安装以后 mysql 的 root 用户是没有密码的，对于生产环境来说，这肯定是不行的，另外还有一些安全相关的设置，可以使用下面这行命令去配置一下，它是一个向导，问你一些问题，你要给出答案，比如是否要设置 root 用户的密码， 密码是什么等等。

```bash
mysql_secure_installation

Enter current password for root (enter for none):
# 解释：输入当前 root 用户密码，默认为空，直接回车。

Set root password? [Y/n]  y
# 解释：要设置 root 密码吗？输入 y 表示愿意。

Remove anonymous users? [Y/n]  y
# 解释：要移除掉匿名用户吗？输入 y 表示愿意。

Disallow root login remotely? [Y/n]  y
# 解释：不想让 root 远程登陆吗？输入 y 表示愿意。

Remove test database and access to it? [Y/n]  y
# 解释：要去掉 test 数据库吗？输入 y 表示愿意。

Reload privilege tables now? [Y/n]  y
# 解释：想要重新加载权限吗？输入 y 表示愿意。

```


你安装成功后，可以查看一下 MySQL 版本，`mysql --version`，如果版本并非你所使用的版本，你可以参考这里进行升级数据库操作[Centos6下升级MySQL数据库](../chapter17/1.2.md)。

## Centos 6.5 卸载 MySQL 软件

### 卸载mysql

通过下面这条命令查看本地mysql安装包

```bash
# 查看
rpm -qa | grep -i mysql

# 输出结果
perl-DBD-MySQL-4.013-3.el6.x86_64
mysql-community-libs-5.6.33-2.el6.x86_64
mysql-community-release-el6-5.noarch
mysql-community-client-5.6.33-2.el6.x86_64
compat-mysql51-5.1.54-1.el6.remi.x86_64
mysql-community-server-5.6.33-2.el6.x86_64
mysql-community-common-5.6.33-2.el6.x86_64
```

你下面命令将它删除

```bash
rpm -e mysql-community-server-5.6.33-2.el6.x86_64
rpm -e compat-mysql51-5.1.54-1.el6.remi.x86_64
```


### 删除mysql服务

```bash
chkconfig --list | grep -i mysql
chkconfig --del mysql
```

### 删除分散mysql文件夹

清空相关mysql的所有目录以及文件，`whereis mysql` 或者 `find / -name mysql` 找到所有文件夹。

```bash
rm -rf /usr/lib/mysql
rm -rf /usr/share/mysql
rm -rf /usr/my.cnf
```

## MySQL服务管理

Mac 系统对服务的操作

1. 启动：`mysql.server start`
2. 停止：`mysql.server stop`
3. 重启：`mysql.server restart`


Linux 服务对服务的操作

1. 启动：`service mysqld start `
2. 停止：`service mysqld stop `
3. 重启：`service mysqld restart`